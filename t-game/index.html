<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberCrawl: Netrunner</title>
    <link rel="stylesheet" href="style.css">
    <!-- Ionicons -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>

<body>

    <!-- Modal / Mission Briefing -->
    <div id="modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <h1 class="glitch-text">>> MISSION BRIEFING << </h1>
                    <div class="story-text">
                        <p>IDENTITY: <strong>Unknown Netrunner</strong><br>TARGET: <strong>CyberDyne Mainframe</strong>
                        </p>

                        <h3>PRIMARY OBJECTIVES</h3>
                        <ul>
                            <li><ion-icon name="scan-circle-outline" style="color:var(--secondary-accent)"></ion-icon>
                                Scan the neural grid (Fog of War)</li>
                            <li><ion-icon name="key-outline" style="color:var(--accent-color)"></ion-icon> Locate
                                <strong>Decryption Keys</strong>
                            </li>
                            <li><ion-icon name="lock-open-outline" style="color:#fff"></ion-icon> Access <strong>Gateway
                                    Ports</strong> to advance levels</li>
                        </ul>

                        <h3 style="color: var(--danger-color); border-color: rgba(255,0,85,0.3);">THREAT ASSESSMENT</h3>
                        <ul>
                            <li><ion-icon name="skull-outline" style="color:var(--danger-color)"></ion-icon> Avoid
                                <strong>P.A.T.R.O.L. Bots</strong> (Lethal)
                            </li>
                            <li><ion-icon name="flash-off-outline" style="color:var(--danger-color)"></ion-icon> Watch
                                for hidden <strong>Malware Traps</strong></li>
                        </ul>

                    </div>
                    <button class="start-btn" onclick="game.startGame()">INITIATE SEQUENCE</button>
        </div>
    </div>

    <div class="container blur-bg" id="game-container">
        <!-- Left Side: Game Board -->
        <div class="game-section">
            <div class="level-indicator">
                <ion-icon name="layers-outline"></ion-icon>
                SECTOR <span id="level-display" style="color: #fff; margin-left:10px;">01</span>
            </div>
            <div id="game-board" class="game-board">
                <!-- Grid cells generated by JS -->
            </div>
        </div>

        <!-- Right Side: Info Panel -->
        <div class="info-section">
            <header>
                <h1>CYBER<span style="color:var(--accent-color)">CRAWL</span></h1>
                <div style="color: var(--secondary-accent); font-size: 0.8rem; letter-spacing: 1px;">
                    <span class="blink">‚óè</span> SYSTEM ONLINE
                </div>
            </header>

            <div class="panel-box stats-panel">
                <div class="stat-row">
                    <span class="stat-label"><ion-icon name="pulse"></ion-icon> INTEGRITY</span>
                    <span id="hp-display" class="stat-value" style="color: var(--accent-color);">100%</span>
                </div>
                <div class="hp-bar-track">
                    <div id="hp-bar" class="hp-bar-fill"></div>
                </div>

                <div class="stat-row" style="margin-top: 20px;">
                    <span class="stat-label"><ion-icon name="server-outline"></ion-icon> CREDITS</span>
                    <span id="score-display" class="stat-value" style="color: var(--warning-color);">0</span>
                </div>
                <!-- Added functionality for credits -->
                <button onclick="game.buyRepair()"
                    style="width:100%; margin-top:5px; font-size:0.8rem; padding:5px; background:#222; color:#aaa; border:1px solid #444;">
                    <ion-icon name="construct-outline"></ion-icon> REPAIR (+20% HP) - 50 CR
                </button>

                <div class="stat-row" style="margin-top: 10px;">
                    <span class="stat-label"><ion-icon name="briefcase-outline"></ion-icon> INVENTORY</span>
                </div>
                <div id="inventory-list" class="inventory-list" style="min-height: 25px;">
                    <!-- Items go here -->
                </div>
            </div>

            <div class="panel-box log-panel" id="log-panel">
                <div class="log-entry system">> System Initialized...</div>
                <div class="log-entry system">> Waiting for user input...</div>
            </div>

            <div class="panel-box controls-panel" style="display: flex; flex-direction: column; align-items: center;">
                <div class="controls-grid">
                    <div></div>
                    <button onclick="game.movePlayer('up')"><ion-icon name="caret-up-outline"></ion-icon></button>
                    <div></div>
                    <button onclick="game.movePlayer('left')"><ion-icon name="caret-back-outline"></ion-icon></button>
                    <button onclick="game.movePlayer('down')"><ion-icon name="caret-down-outline"></ion-icon></button>
                    <button onclick="game.movePlayer('right')"><ion-icon
                            name="caret-forward-outline"></ion-icon></button>
                </div>
                <div style="font-size: 0.7rem; color: #555; margin-top: 10px;">WASD / ARROW KEYS TERMINAL ENABLED</div>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="game-over-modal" class="modal-overlay hidden">
        <div class="modal-content" id="go-content">
            <h2 id="go-title" class="glitch-text">SYSTEM FAILURE</h2>
            <p id="go-message" class="story-text">Connection with operative lost.</p>
            <div style="margin: 20px 0; font-size: 1.2rem; font-family: 'Orbitron';">
                FINAL SCORE: <span id="go-score-val" style="color: #fff;">0</span>
            </div>
            <button class="start-btn" onclick="location.reload()" id="go-btn">REBOOT SYSTEM</button>
        </div>
    </div>

    <script src="index.js"></script>
</body>

</html>